VGHKS Dicom SR Web API
======================

A Sinatra application to parse DICOM SR object, extract the measurements and calculations, and supply a web API for integration into the RIS.

## Requirement

- sinatra
- ruby-dicom
- imagemagick
  - on macOS with homebrew, rmagic gen only supports imagemagick@6 ([ref](https://stackoverflow.com/a/43035892/1576281))
  - on Windows, ImageMagick shoule be installed. Remember to check "Install development headers and libraries for C and C++" during the installation. 

## Currently Support

Sonography SR of upper/lower abdomen, TRUS, carotid Doppler, generated by GE and Philips.

## PACS Configuration

After cloning the repo, add a folder `config` and put `config.yaml` into it. The config contains:

```yaml
pacs:
  ip: __pacs_ip__
  port: __pacs_ip__
  ae: __pacs_ae_title__
wado:
  ip: __wado_ip__
  port: __wado_port__
  path: __wado_path__
```

## Local Testing

```bash
rackup
```

## CLI Utility

`sr-cli.rb` can take *accession_no* as the first argument, retrieve the DICOM SR file from PACS, parse it, and output in json format. 
